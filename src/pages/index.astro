---
import Layout from '@/layouts/Layout.astro';
import { getImage } from 'astro:assets';
import hero from '@/images/Workshop-computer-in-service.jpg';
import { getCollection } from 'astro:content';

const optHero = await getImage({
  src: hero,
  format: 'webp',
  quality: 100,
  loading: 'eager',
});
const articles = await getCollection('articles');
const presentation = articles.find((a) => a.slug === 'presentation');
if (!presentation) throw new Error('presentation not found');
const { Content: Presentation } = await presentation.render();
---

<Layout title="Ihr KFZ-Meisterbetrieb in Sindelfingen">
  <section class="hero">
    <div
      class="hero-image"
      style={`background-image: linear-gradient(270deg, rgba(255, 255, 255, 0) 0%, rgba(23, 63, 96, 0.53) 100%), url(${optHero.src})`}
    >
    </div>
    <div class="hero-content">
      <div class="hero-text"><Presentation /></div>
      <div class="hero-cards">
        <div class="card card-transfert">
          <h2>Wir sind umgezogen:</h2>
          <p>Neckarstrasse 12<br />71065 Sindelfingen</p>
        </div>
        <div class="card card-offert">
          <h2>Reifeneinlagen</h2>
          <p>Profitieren Sie von unseren Er√∂ffnungsrabatten.</p>
          <a href="/offert">mehr Infos</a>
        </div>
      </div>
    </div>
  </section>

  <style>
    .hero {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;

      .hero-image {
        background-position: center;
        background-size: cover;
        height: 15rem;
      }
      .hero-content {
        font-family: 'Lato', sans-serif;
        p {
          color: #666;
          font-weight: 500;
        }
        .hero-text {
          padding: 2.5rem 1rem;
          h1 {
            margin-bottom: 1rem;
            font-weight: 700;
            font-size: 1.5rem;
          }
          p {
            padding-bottom: 0.8rem;
            font-size: 0.8rem;
            line-height: 1.8;
          }
        }
        .hero-cards {
          display: flex;
          flex-direction: column;
          flex-wrap: wrap;
          .card {
            display: flex;
            flex: 1;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            padding: 2.5rem 0;
            &.card-transfert {
              background: #becedb;
            }
            &.card-offert {
              background: #ccd8e5;

              a {
                position: relative;
                transition: 0.4s ease;
                border-radius: 5rem;
                background: #ffffff66;
                padding: 0.5rem 1rem;
                font-weight: 700;
                &:hover {
                  transform: scale(1.1);
                  box-shadow: 0 2px 0.5rem #00000033;
                }
                &:active {
                  transform: scale(1);
                  box-shadow: none;
                }
              }
            }
            h2 {
              font-weight: 700;
              font-size: 1.15rem;
            }
            p {
              text-align: center;
            }
          }
        }
      }
      @media screen and (min-width: 40rem) {
        .hero-content {
          .hero-cards {
            flex-direction: row;
          }
        }
      }
      @media screen and (min-width: 80rem) {
        flex-direction: row;
        .hero-image {
          flex: 1;
          height: initial;
        }
        .hero-content {
          flex: 1;
          .hero-text {
            padding: 4rem 3rem;
          }
        }
      }
    }
  </style>
</Layout>
